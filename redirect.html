<!DOCTYPE html>
<html>
<head>
  <title>Campus Calendar Selector</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    h2 {
      color: #FF5C35;
      margin-bottom: 20px;
    }
    .campus-button {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      background-color: #f7f7f7;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      text-align: left;
      transition: background-color 0.2s;
    }
    .campus-button:hover {
      background-color: #eaeaea;
    }
    .campus-button:focus {
      outline: none;
      box-shadow: 0 0 0 2px #FF5C35;
    }
  </style>
</head>
<body>
  <h2>Select Your Campus Calendar</h2>
  <p>Please select your campus to view the corresponding calendar:</p>
  
  <div id="campus-buttons">
    <!-- Buttons will be added here by JavaScript -->
  </div>

  <script>
    async function loadCalendars() {
      try {
        // Fetch the campus calendars mapping
        const response = await fetch('https://collectivacademyadmin.github.io/hubspot-campus-calendars/campus-calendars.json');
        const data = await response.json();
        
        // Get the container
        const container = document.getElementById('campus-buttons');
        
        // Create a button for each campus
        for (const [location, info] of Object.entries(data.locations)) {
          const button = document.createElement('button');
          button.className = 'campus-button';
          button.textContent = info.name;
          
          button.onclick = function() {
            // Open the calendar
            window.open(info.link, '_blank');
            
            // Close the iframe
            setTimeout(() => {
              window.parent.postMessage(JSON.stringify({"action": "DONE"}), "*");
            }, 500);
          };
          
          container.appendChild(button);
        }
      } catch (error) {
        console.error('Error loading calendars:', error);
        document.body.innerHTML = '<h2>Error</h2><p>Could not load calendar information. Please try again later.</p>';
      }
    }
    
    // Load when page is ready
    window.onload = loadCalendars;
  </script>
</body>
</html>
